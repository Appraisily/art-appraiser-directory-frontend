# Netlify Deployment Guide

This document provides information about how the Art Appraiser Directory is deployed to Netlify, including SEO optimizations and build process details.

## Overview

The site uses a custom build process to ensure all SEO optimizations are properly applied. This includes:

1. Static HTML generation for all pages
2. Optimized images
3. Comprehensive sitemap generation
4. SEO metadata and structured data
5. Security headers
6. Performance optimizations

## Netlify Configuration

The deployment is controlled by the `netlify.toml` file in the root directory. This file defines:

- Build command: `npm run build:netlify`
- Publish directory: `dist`
- Environment variables for the build
- URL redirects and rewrites for SPA functionality
- HTTP headers for security and caching

## Build Process

The build process is handled by the `scripts/netlify-build.js` script, which performs the following steps:

1. Clean up previous build artifacts
2. Compile TypeScript
3. Build the application with Vite
4. Generate static HTML pages for all locations and appraisers
5. Copy static assets
6. Optimize images
7. Generate a comprehensive sitemap
8. Fix potential React hydration issues
9. Minify HTML files
10. Validate the build

## SEO Optimizations

The site includes several SEO optimizations:

- Semantic HTML structure
- Schema.org structured data (LocalBusiness, FAQPage, BreadcrumbList)
- City-specific meta tags and keywords
- "Near me" optimized content
- OpenGraph and Twitter Card metadata
- Comprehensive XML sitemap
- Properly configured robots.txt
- Mobile-friendly design
- Accessible content

## Troubleshooting

If you encounter issues with the Netlify deployment:

1. **Local vs. Netlify builds**: If the build on Netlify differs from local builds, check that the `SITE_URL` environment variable is correctly set in Netlify.

2. **Missing resources**: If assets or pages are missing, check the build logs for errors during the static generation process.

3. **SEO issues**: Verify that the structured data is being properly generated by inspecting the page source.

4. **Broken links**: Run `npm run site-check` locally to validate all links before deploying.

## Deployment Commands

- **Full Build**: `npm run build:netlify`
- **Deploy Directly**: `npm run deploy:direct`
- **Test Build Locally**: `npm run build:seo-optimized`
- **Validate Site**: `npm run site-check`

## Environment Variables

The following environment variables should be set in the Netlify deployment settings:

- `SITE_URL`: The base URL of the site (e.g., `https://art-appraiser.appraisily.com`)
- `NODE_VERSION`: Set to `16` for compatibility

## Notes for Future Developers

When making changes to the site structure or adding new pages:

1. Update the sitemap generation script if needed (`scripts/generate-sitemap.js`)
2. Ensure new page types have proper SEO metadata and schema markup
3. Check that all images have appropriate alt text and optimized formats
4. Validate that city-specific keywords are maintained in location pages
5. Test the site with both JavaScript enabled and disabled
6. Verify mobile responsiveness of all new components 